<html>
<head>
<title>DBD::Chart 0.51 - Perl DBI Driver abstraction for rendering charts and graphs</title>
<META NAME="keywords" CONTENT="Chart, graph, chart, Perl, perl, DBD, DBI, PNG, GD">
<META NAME="description" CONTENT="DBD::Chart Reference and User Guide.">
<META NAME="author" CONTENT="By Dean Arnold"></head>
<body>
<h2>DBD::Chart - Perl DBI Driver interface For Rendering Charts and Graphs</h3><p>

<ul>
<li><a href="#synopsis">SYNOPSIS</a>
<ul>
<li><a href="#piechart">Pie Chart</a>
<li><a href="#barchart">3-D Bar Chart</a>
<li><a href="#pointgraph">Point Graph</a>
<li><a href="#linegraph">Multirange Linegraph with Logo and Signature</a>
<li><a href="#areagraph">Multirange Areagraph</a>
<li><a href="#loggraph">Log-Log Linegraph</a>
<li><a href="#candlestick">Candlestick Chart</a>
<li><a href="#symgraph">Multirange Symbolic Linegraph</a>
<li><a href="#boxchart">Box & Whisker Chart with Imagemap</a>
<li><a href="#iconbars">Iconic Barchart with Imagemap</a>
<li><a href="http://www.presicient.com/dbdchart/testres.html">Lots more examples...</a>
<!-- <li><a href="#candledate">Temporal Domain Candlestick Chart</a>
<li><a href="#candledate">Temporal Domain Linegraph</a> -->
</ul>
<li><a href="#description">DESCRIPTION</a>
<li><a href="#version">VERSION</a>
<li><a href="#history">CHANGE HISTORY</a>
<li><a href="#behavior">DRIVER-SPECIFIC BEHAVIOR</a>
<ul>
<li><a href="#dsn">DATA-SOURCE NAME</a>
<li><a href="#types">DATA TYPES</a>
<li><a href="#parmsql">SQL DIALECT</a>
<ul>
<li><a href="#create">CREATE</a>
<li><a href="#drop">DROP</a>
<li><a href="#insert">INSERT</a>
<li><a href="#select">SELECT</a>
<li><a href="#update">UPDATE</a>
<li><a href="#delete">DELETE</a>
</ul>
<li><a href="#imagemaps">IMAGEMAPS</a>
<li><a href="#errors">ERROR HANDLING</a>
<li><a href="#diags">DIAGNOSTICS</a>
<li><a href="#specattr">DRIVER-SPECIFIC ATTRIBUTES</a>
<li><a href="#funcs">DRIVER-SPECIFIC FUNCTIONS</a>
</ul>
<li><a href="#conform">PREREQUISITES AND CONFORMANCE</a>
<li><a href="#bugs">KNOWN BUGS</a>
<li><a href="#todo">TO DO List</a>
<li><a href="#acks">ACKNOWLEDGEMENTS</a>
<li><a href="#refs">REFERENCES</a>
<li><a href="#copy">COPYRIGHT</a>
</ul>
<p>
<a name="synopsis"></a>
<h2>SYNOPSIS</h2><p>
<a name="piechart"></a>
<h3>Pie Chart</h3>
<pre>
use DBI;
my $dbh = DBI->connect('dbi:Chart:');
    or die "Cannot connect\n";
#
#    example: create a pie chart
#
$dbh->do('CREATE TABLE pie (region CHAR(20), sales FLOAT)');
$sth = $dbh->prepare('INSERT INTO pie VALUES( ?, ?)');
$sth->execute('East', 2756.34);
$sth->execute('Southeast', 3456.78);
$sth->execute('Midwest', 1234.56);
$sth->execute('Southwest', 4569.78);
$sth->execute('Northwest', 33456.78);

$rsth = $dbh->prepare(
"SELECT PIECHART FROM pie
 WHERE WIDTH=400 AND HEIGHT=400 AND
 TITLE = \'Sales By Region\' AND 
 COLOR=(red, green, blue, lyellow, lpurple) AND
 BACKGROUND=lgray AND 
 SIGNATURE=\'Copyright(C) 2001, GOWI Systems, Inc.\'");
$rsth->execute;
$rsth->bind_col(1, \$buf);
$rsth->fetch;
</pre>
<img src="simppie.png" alt="Simple Pie Chart">
<p>
<a name="barchart"></a>
<h3>3-D Bar Chart</h3>
<pre>
#
# multi-range 3-D bar chart
#
$dbh->do('CREATE TABLE bars (quarter SMALLINT, East FLOAT, '.
'Southeast FLOAT, Midwest FLOAT, Southwest FLOAT, Northwest FLOAT)');
$sth = $dbh->prepare('INSERT INTO bars VALUES(?, ?, ?, ?, ?, ?)');
$sth->execute(1, -2756.34, 3456.78, 1234.56, -4569.78, 33456.78);
$sth->execute(2, 2756.34, 3456.78, 1234.56, 4569.78, 33456.78);
$sth->execute(3, 2756.34, 3456.78, -1234.56, 4569.78, 33456.78);
$sth->execute(4, 2756.34, -3456.78, 1234.56, 4569.78, 33456.78);

$rsth = $dbh->prepare(
"SELECT BARCHART FROM bars
WHERE WIDTH=600 AND HEIGHT=400 AND X-AXIS=\'Quarter\' AND
Y-AXIS=\'Revenue\' AND TITLE = \'Quarterly Revenue By Region\' AND
3-D=1 AND SHOWVALUES=1 AND COLOR=(red, green, blue, yellow, dbrown)");
$rsth->execute;
$rsth->bind_col(1, \$buf);
$rsth->fetch;
</pre>
<img src="multibar.png" alt="Bar Chart">
<p>
<a name="pointgraph"></a>
<h3>Point Graph</h3>
<pre>
#
# scatter graph
#
$dbh->do('CREATE CHART line (Month SMALLINT, sales FLOAT)');
$sth = $dbh->prepare('INSERT INTO line VALUES( ?, ?)');
$sth->execute(1, 2756.34);
$sth->execute(2, 3456.78);
        ...insert some more rows.....
$sth->execute(12, 90.57);

$rsth = $dbh->prepare(
"SELECT POINTGRAPH FROM line
WHERE WIDTH=500 AND HEIGHT=300 AND X-AXIS=\'Sales\' AND
TITLE = \'Sales By Region\' AND COLOR=black AND SHOWGRID=0 AND
SHAPE=filldiamond AND SHOWVALUES=1");
$rsth->execute;
$rsth->bind_col(1, \$buf);
$rsth->fetch;
</pre>
<img src="simppts.png" alt="Scatter Graph">
<p>
<a name="linegraph"></a>
<h3>Multi-range Linegraph, with Logo and Signature</h3>
<pre>
#
# multi-range line w/ points, bkground image, and signature
#
$dbh->do('DROP CHART line');
$dbh->do('CREATE CHART line (Month SMALLINT, East FLOAT, ' .
'Southeast float, Midwest float, Southwest float, Northwest float)');
$sth = $dbh->prepare('INSERT INTO line VALUES( ?, ?, ?, ?, ?, ?)');
$sth->execute(1, 2756.34, 3456.90, 1234.99, 1005.34, 2876.34);
$sth->execute(2, 3456.78, undef, 4321.25, 9001.34, 997.68);
        ...insert some more rows.....
$sth->execute(12, 90.57,3456.90, 1234.99, undef, 2876.34);

$rsth = $dbh->prepare(
"SELECT LINEGRAPH FROM line
WHERE WIDTH=? AND HEIGHT=? AND X-AXIS=? AND Y-AXIS=? AND
TITLE = \'Monthly Sales By Region\' AND 
COLOR=(red, green, blue, yellow, lbrown) AND
SHOWPOINTS=1 AND SHOWGRID=1 AND 
SHAPE=(fillcircle, fillsquare, filldiamond, horizcross, diagcross) AND
LOGO=\'gowilogo.png\' AND BACKGROUND=lgray AND 
X-ORIENT=\'VERTICAL\' AND 
SIGNATURE=\'Copyright(C) 2001, GOWI Systems, Inc.\'");
$rsth->execute(400, 400, 'Month', 'Sales');
$rsth->bind_col(1, \$buf);
$rsth->fetch;
</pre>
<img src="multlpt.png" alt="Multiline Graph">
<p>
<a name="areagraph"></a>
<h3>Multi-range Area Graph</h3>
<pre>
$dbh->do('CREATE CHART line (Month SMALLINT, East FLOAT, ' .
'Southeast float, Midwest float, Southwest float, Northwest float)');
$sth = $dbh->prepare('INSERT INTO line VALUES( ?, ?, ?, ?, ?, ?)');

@month = (1,2,3,4,5,6,7,8,9,10,11,12);
@east = ( 2756.34, 3456.90, 1234.99, 1005.34, 2876.34, 3456.78, undef, 
	4321.25, 9001.34, 997.68, 1234.56, 7783.20);
@seast = ( 5321.11, 3333.33, 876.10, 4569.78, 4326.3,  -7895.44, 4444.44, 
	12345.29, 3456.78, 12094.5, 6666.66, 3322.11);
@midwest = ( 9090.90, 908.57, -2367.4, 3399.55, 5555.55, 887.3, 756.34, 
	1111.11, 2222.22, 8888.88, 9456.3, undef);
@swest = ( 7783.20, 5321.11, 3333.33, 876.10, 12349.56, 12094.5, 6666.66,
	3322.11, 9090.90, 4569.78, 3456.99, 4321.25);
@nwest = ( 9001.34, 997.68, 13456.78, 2367.4, 3399.55, 5555.55, 887.3,
	90.57, 3456.90, 1234.99, undef, 2876.34);
	
$sth->func(1, \@month, chart_bind_param_array);
$sth->func(2, \@east, chart_bind_param_array);
$sth->func(3, \@seast, chart_bind_param_array);
$sth->func(4, \@midwest, chart_bind_param_array);
$sth->func(5, \@swest, chart_bind_param_array);
$sth->func(6, \@nwest, chart_bind_param_array);

%stsary = ();
$sth->func(\%stsary, chart_bind_param_status);

$sth->execute;

$rsth = $dbh->prepare(
"SELECT AREAGRAPH FROM line
WHERE WIDTH=400 AND HEIGHT=400 AND X-AXIS=\'Month\' AND
Y-AXIS=\'Sales\' AND TITLE = \'Monthly Sales By Region\' AND
COLOR=(red, green, blue, yellow, lbrown) AND
SHOWPOINTS=1 AND SHOWGRID=1 AND
SHAPE=(fillcircle, fillsquare, filldiamond, horizcross, diagcross)");
$rsth->execute;
$rsth->bind_col(1, \$buf);
$rsth->fetch;
</pre>
<img src="multarea.png" alt="Area Graph">
<p>
<a name="loggraph"></a>
<h3>Log-Log Linegraph</h3>
<pre>
#
# log-log line graph
#
$dbh->do('CREATE CHART line (Month FLOAT, sales FLOAT)');
$sth = $dbh->prepare('INSERT INTO line VALUES( ?, ?)');
for ($i = -3; $i &lt; 13; $i++) {
	$sth->execute(5**$i, exp($i));
}

$rsth = $dbh->prepare(
"SELECT LINEGRAPH FROM line
WHERE WIDTH=450 AND HEIGHT=450 AND X-AXIS=\'5**X\' AND 
Y-AXIS=\'e**X\' AND Y-LOG=1 AND X-LOG=1 AND 
SHOWVALUES=0 AND TITLE = \'Sample Log-Log Linegraph\' AND
COLOR=lred AND SHOWGRID=1 AND SHOWPOINTS=1");
$rsth->execute;
$rsth->bind_col(1, \$buf);
$rsth->fetch;
</pre>
<img src="simpylog.png" alt="Log-Log Graph">
<p>
<a name="candlestick"></a>
<h3>Candlestick Chart</h3>
<pre>
#
# simple candle graph, directly from another statement handle
#
$tddbh = DBI->connect('dbi:Teradata:dbc', 'dbitst', 'dbitst',
    { PrintError => 1, RaiseError => 0, AutoCommit => 1 });
$tdsth = $tddbh->prepare(
"SELECT TradeDay(VARCHAR(18)), lowprice, highprice
    FROM candle ORDER BY TradeDay");
$tdsth->execute;

$rsth = $dbh->prepare(
"SELECT CANDLESTICK FROM ?
 WHERE WIDTH=? AND HEIGHT=? AND X-AXIS=? AND Y-AXIS=? AND
 TITLE = \'Daily Price Range\' AND COLOR=red AND SHOWGRID=1 AND
 SHAPE=filldiamond AND SHOWPOINTS=1 AND SHOWVALUES=0");
$rsth->execute($tdsth, 300,400, 'Date', 'Price');
$rsth->bind_col(1, \$buf);
$rsth->fetch;
</pre>
<img src="simpcndl.png" alt="Candlestick Graph">
<p>
<a name="symgraph"></a>
<h3>Multirange Symbolic Linegraph</h3>
<pre>
#
#	use same data to render linegraph with symbolic domain
#
$tdsth->execute;

$rsth = $dbh->prepare(
"SELECT LINEGRAPH FROM ?
    WHERE WIDTH=400 AND HEIGHT=400 AND X-AXIS=\'Date\' AND
    Y-AXIS=\'Price\' AND TITLE = \'Daily Price Range\' AND
    COLOR=(red, blue) AND SHOWGRID=1 AND
    SHAPE=(filldiamond, fillsquare) AND SHOWPOINTS=1");

$rsth->execute($tdsth);
$rsth->bind_col(1, \$buf);
$rsth->fetch;
</pre>
<img src="simpsymb.png" alt="Non-numeric Graph">
<p>
<a name="boxchart"></a>
<h3>Multidomain Box & Whisker Chart with Imagemap</h3>
<pre>
#
#	simple boxchart with imagemap
#
@x = ();
@y = ();
$dbh-&gt;do('CREATE TABLE samplebox (First integer, Second integer)');
$sth = $dbh-&gt;prepare('INSERT INTO samplebox VALUES(?, ?)');
foreach (1..100) { 
	$sth-&gt;execute($_, int($_/2)+20);
}
$sth = $dbh-&gt;prepare("SELECT BOXCHART, IMAGEMAP FROM samplebox
WHERE WIDTH=500 and HEIGHT=300 AND
	title = 'Sample Box & Whisker Chart' AND
	signature = 'Copyright(C) 2001, Presicient Corp.' AND
	MAPNAME = 'boxsample' AND
	SHOWVALUES = 1 AND
	COLORS=(red, blue) AND
	mapURL = 'http://www.presicient.com/samplemap.pl?plotnum=:PLOTNUM&x=:X&y=:Y&z=:Z'"
	);
$sth-&gt;execute;
$row = $sth-&gt;fetchrow_arrayref;

open(PIE, '&gt;samplebox.png');
binmode PIE;
print PIE $$row[0];
close PIE;
print MAP '&lt;h2&gt;Boxchart with Imagemap&lt;/h2&gt;', "\n";
print MAP '&lt;img src=samplebox.png usemap="#boxsample"&gt;',
	$$row[1], "\n";
$dbh-&gt;do('DROP TABLE samplebox');
</pre>
<img src=samplebox.png usemap="#boxsample"><MAP NAME="boxsample">
<AREA ALT="50.5[25.5..75.5]"  HREF="http://www.presicient.com/samplemap.pl?plotnum=0&x=50.5&y=25.5&z=75.5"  SHAPE=RECT COORDS="161,149,338,177">
<AREA ALT="1"  HREF="http://www.presicient.com/samplemap.pl?plotnum=0&x=1&y=&z="  SHAPE=CIRCLE COORDS="75,163,4">
<AREA ALT="100"  HREF="http://www.presicient.com/samplemap.pl?plotnum=0&x=100&y=&z="  SHAPE=CIRCLE COORDS="424,163,4">
<AREA ALT="45[32.5..57.5]"  HREF="http://www.presicient.com/samplemap.pl?plotnum=0&x=45&y=32.5&z=57.5"  SHAPE=RECT COORDS="186,81,274,108">
<AREA ALT="20"  HREF="http://www.presicient.com/samplemap.pl?plotnum=0&x=20&y=&z="  SHAPE=CIRCLE COORDS="142,94,4">
<AREA ALT="70"  HREF="http://www.presicient.com/samplemap.pl?plotnum=0&x=70&y=&z="  SHAPE=CIRCLE COORDS="318,94,4">
</MAP>
<p>

<a name="iconbars"></a>
<h3>Iconic Barchart With Imagemap</h3>
<pre>
#
#	iconic barchart
#
my @months = qw(Jan Feb Mar Apr May Jun Jul Aug Sep Oct Nov Dec);
my @pumpsales = (123, 100, 78, 45, 50, 70, 30, 36, 67, 234, 201, 194);
my @turksales = (123, 70, 65, 35, 40, 70, 90, 80, 67, 134, 301, 250);
$dbh-&gt;do('CREATE TABLE iconic (month char(3), pumpkins integer, turkeys integer)');
my $sth = $dbh-&gt;prepare('INSERT INTO iconic VALUES(?, ?, ?)');
for (my $i = 0; $i &lt;= $#months; $i++) {
	$sth-&gt;execute($months[$i], $pumpsales[$i], $turksales[$i]);
}
$sth = $dbh-&gt;prepare("SELECT BARCHART, IMAGEMAP FROM iconic
WHERE WIDTH=820 and HEIGHT=500 AND
	title = 'Monthly Pumpkin vs. Turkey Sales' AND
	signature = 'Copyright(C) 2001, Presicient Corp.' AND
	X-AXIS = 'Month' AND
	Y-AXIS = 'Sales' AND
	icons = ('pumpkin.png', 'turkey.png' ) AND
	keepOrigin = 1 AND
	SHOWGRID = 1 AND
	MAPNAME = 'pumpkins' AND
	MAPURL = 'http://www.presicient.com/samplemap.pl'"	);

$sth-&gt;execute;
my $row = $sth-&gt;fetchrow_arrayref;

open(BAR, '&gt;iconbar.png');
binmode BAR;
print BAR $$row[0];
close BAR;
print MAP '&lt;p&gt;&lt;h2&gt;Iconic Barchart with Imagemap&lt;/h2&gt;', "\n";
print MAP '&lt;img src=iconbar.png usemap="#pumpkins"&gt;',
	$$row[1], "\n";
$dbh-&gt;do('DROP TABLE iconic');
</pre>
<img src=iconbar.png usemap="#pumpkins"><MAP NAME="pumpkins">
<AREA ALT="123"  HREF="http://www.presicient.com/samplemap.pl"  SHAPE=RECT COORDS="104,278,126,384">
<AREA ALT="100"  HREF="http://www.presicient.com/samplemap.pl"  SHAPE=RECT COORDS="158,298,180,384">
<AREA ALT="78"  HREF="http://www.presicient.com/samplemap.pl"  SHAPE=RECT COORDS="213,316,235,384">
<AREA ALT="45"  HREF="http://www.presicient.com/samplemap.pl"  SHAPE=RECT COORDS="267,345,289,384">
<AREA ALT="50"  HREF="http://www.presicient.com/samplemap.pl"  SHAPE=RECT COORDS="322,341,344,384">
<AREA ALT="70"  HREF="http://www.presicient.com/samplemap.pl"  SHAPE=RECT COORDS="376,323,398,384">
<AREA ALT="30"  HREF="http://www.presicient.com/samplemap.pl"  SHAPE=RECT COORDS="431,358,453,384">
<AREA ALT="36"  HREF="http://www.presicient.com/samplemap.pl"  SHAPE=RECT COORDS="485,353,507,384">
<AREA ALT="67"  HREF="http://www.presicient.com/samplemap.pl"  SHAPE=RECT COORDS="540,326,562,384">
<AREA ALT="234"  HREF="http://www.presicient.com/samplemap.pl"  SHAPE=RECT COORDS="594,182,616,384">
<AREA ALT="201"  HREF="http://www.presicient.com/samplemap.pl"  SHAPE=RECT COORDS="649,211,671,384">
<AREA ALT="194"  HREF="http://www.presicient.com/samplemap.pl"  SHAPE=RECT COORDS="703,217,725,384">
<AREA ALT="123"  HREF="http://www.presicient.com/samplemap.pl"  SHAPE=RECT COORDS="126,278,148,384">
<AREA ALT="70"  HREF="http://www.presicient.com/samplemap.pl"  SHAPE=RECT COORDS="180,323,202,384">
<AREA ALT="65"  HREF="http://www.presicient.com/samplemap.pl"  SHAPE=RECT COORDS="235,328,257,384">
<AREA ALT="35"  HREF="http://www.presicient.com/samplemap.pl"  SHAPE=RECT COORDS="289,353,311,384">
<AREA ALT="40"  HREF="http://www.presicient.com/samplemap.pl"  SHAPE=RECT COORDS="344,349,366,384">
<AREA ALT="70"  HREF="http://www.presicient.com/samplemap.pl"  SHAPE=RECT COORDS="398,323,420,384">
<AREA ALT="90"  HREF="http://www.presicient.com/samplemap.pl"  SHAPE=RECT COORDS="453,306,475,384">
<AREA ALT="80"  HREF="http://www.presicient.com/samplemap.pl"  SHAPE=RECT COORDS="507,315,529,384">
<AREA ALT="67"  HREF="http://www.presicient.com/samplemap.pl"  SHAPE=RECT COORDS="562,326,584,384">
<AREA ALT="134"  HREF="http://www.presicient.com/samplemap.pl"  SHAPE=RECT COORDS="616,268,638,384">
<AREA ALT="301"  HREF="http://www.presicient.com/samplemap.pl"  SHAPE=RECT COORDS="671,125,693,384">
<AREA ALT="250"  HREF="http://www.presicient.com/samplemap.pl"  SHAPE=RECT COORDS="725,169,747,384">
<AREA ALT="123"  HREF="http://www.presicient.com/samplemap.pl"  SHAPE=RECT COORDS="104,278,126,384">
<AREA ALT="100"  HREF="http://www.presicient.com/samplemap.pl"  SHAPE=RECT COORDS="158,298,180,384">
<AREA ALT="78"  HREF="http://www.presicient.com/samplemap.pl"  SHAPE=RECT COORDS="213,316,235,384">
<AREA ALT="45"  HREF="http://www.presicient.com/samplemap.pl"  SHAPE=RECT COORDS="267,345,289,384">
<AREA ALT="50"  HREF="http://www.presicient.com/samplemap.pl"  SHAPE=RECT COORDS="322,341,344,384">
<AREA ALT="70"  HREF="http://www.presicient.com/samplemap.pl"  SHAPE=RECT COORDS="376,323,398,384">
<AREA ALT="30"  HREF="http://www.presicient.com/samplemap.pl"  SHAPE=RECT COORDS="431,358,453,384">
<AREA ALT="36"  HREF="http://www.presicient.com/samplemap.pl"  SHAPE=RECT COORDS="485,353,507,384">
<AREA ALT="67"  HREF="http://www.presicient.com/samplemap.pl"  SHAPE=RECT COORDS="540,326,562,384">
<AREA ALT="234"  HREF="http://www.presicient.com/samplemap.pl"  SHAPE=RECT COORDS="594,182,616,384">
<AREA ALT="201"  HREF="http://www.presicient.com/samplemap.pl"  SHAPE=RECT COORDS="649,211,671,384">
<AREA ALT="194"  HREF="http://www.presicient.com/samplemap.pl"  SHAPE=RECT COORDS="703,217,725,384">
<AREA ALT="123"  HREF="http://www.presicient.com/samplemap.pl"  SHAPE=RECT COORDS="126,278,148,384">
<AREA ALT="70"  HREF="http://www.presicient.com/samplemap.pl"  SHAPE=RECT COORDS="180,323,202,384">
<AREA ALT="65"  HREF="http://www.presicient.com/samplemap.pl"  SHAPE=RECT COORDS="235,328,257,384">
<AREA ALT="35"  HREF="http://www.presicient.com/samplemap.pl"  SHAPE=RECT COORDS="289,353,311,384">
<AREA ALT="40"  HREF="http://www.presicient.com/samplemap.pl"  SHAPE=RECT COORDS="344,349,366,384">
<AREA ALT="70"  HREF="http://www.presicient.com/samplemap.pl"  SHAPE=RECT COORDS="398,323,420,384">
<AREA ALT="90"  HREF="http://www.presicient.com/samplemap.pl"  SHAPE=RECT COORDS="453,306,475,384">
<AREA ALT="80"  HREF="http://www.presicient.com/samplemap.pl"  SHAPE=RECT COORDS="507,315,529,384">
<AREA ALT="67"  HREF="http://www.presicient.com/samplemap.pl"  SHAPE=RECT COORDS="562,326,584,384">
<AREA ALT="134"  HREF="http://www.presicient.com/samplemap.pl"  SHAPE=RECT COORDS="616,268,638,384">
<AREA ALT="301"  HREF="http://www.presicient.com/samplemap.pl"  SHAPE=RECT COORDS="671,125,693,384">
<AREA ALT="250"  HREF="http://www.presicient.com/samplemap.pl"  SHAPE=RECT COORDS="725,169,747,384">
</MAP>
<p>
<a name="description"></a>
<h2>DESCRIPTION</h2><p>

DBI driver abstraction for rendering pie charts, bar charts, box & whisker charts,
line, point, area, and candlestick graphs. The default output format is PNG; 
JPEG, or GIF format can be generated
by setting the FORMAT property (see below), assuming the appropriate supporting
libraries and modules are installed.<br>
<b>BE ADVISED:</b> This is <b>BETA</B> software, and subject to change at the
whim of the author(s). <p>

Why DBD::Chart ? Basically, the idea is to make chart rendering easy for us database 
geeks...and maybe for other folks, as well. Being able to render a chart from a 
rowset by simply binding output column buffers as input parameter buffers for a 
simple INSERT, then just SELECT'ing to get the image, seemed like a nice 
abstraction.<p>

BTW: This driver is 100% pure Perl.<p>
<p>
<a name="version"></a>
<h2>CURRENT VERSION</h2><p>

Release 0.51<p>

<a href="http://www.presicient.com/dbdchart/dbdchart051.zip">ZIP version</a><br>
<a href="http://www.presicient.com/dbdchart/DBD-Chart-0.51.tar.gz">.tar.gz version</a>

<a name="history"></a>
<h2>CHANGE HISTORY</h2><p>

Release 0.51:
<ul>
<li>3-D piechart support
<li>multicolor, single range barcharts
</ul>

Release 0.50:
<ul>
<li>remove dependencies on GD::Graph (ie., added internal piechart, barchart rendering in DBD::Chart::Plot)
<li>added iconic barcharts and datapoints (ie., use small images instead of solid bars/points)
<li>3-D, 3 axis barcharts (X, Y, Z datapoints)
<li>support for imagemap hotspot generation (i.e., SELECT LINEGRAPH, IMAGEMAP FROM...)
<li>added box&whisker charts
<li>moved logo processing from DBD::Chart to DBD::Chart::Plot
<li>bug fix for symbolic domain areagraphs
<li>bug fix for escaping single quotes inside a string
<!-- <li>font properties support (FONT='courier' AND TEXTCOLOR='red')
<li>grid colors other than black (GRIDCOLOR='blue')
<li>histograms (ie., horizontal barcharts) -->
<!-- <li>preliminary XML template support<br>
(SELECT TEMPLATE WHERE ...., SELECT LINEGRAPH FROM ? WHERE TEMPLATE='template.xml') -->
<!-- <li>SVG format support (FORMAT='SVG') -->
</ul>

Release 0.43:
<ul>
<li>fix to support GIF via older GD packages (many thanks to Peter Scott!)
<li>other cosmetic fixes
</ul>

Release 0.42:
<ul>
<li>fix to support X-ORIENT='HORIZONTAL' on symbolic domains, candlesticks
</ul>

Release 0.41:
<ul>
<li>fix to strip quotes from string literal in INSERT statement
<li>fix for string literal column index variable in prepare of INSERT
<li>fix for Y-axis tick alignment when no grid is requested
</ul>

Release 0.40:<p>
<ul>
<li>fix for DECIMAL, INTEGER, etc. last columns in CREATE TABLE</li>
<li>fix for FORMAT property to properly handle as string value</li>
<li>added Y-MAX, Y-MIN properties to control Y-axis min/max values for barcharts</li>
</ul>

Release 0.30:<p>
<ul>
<li>strip newlines from SQL for prepare()
<li>add BACKGROUND property to set background color, incl. transparent background
<li>add FORMAT property to select PNG or JPEG
<li>add X-ORIENT property to set X-tick label orientation
<li>add LOGO property to set a background image
<li>add SIGNATURE property to set a signature string in image
<li>add placeholder support in SELECT WHERE clause
<li>add KEEPORIGIN property to force (0,0) in the graph
<li>auto-skip symbolic X-axis vertical tick labels when they overlap
<li>add parameterized chart datasource (i.e., SELECT BARCHART FROM ? WHERE...)
</ul><p>

Release 0.20:<p>
<ul>
<li>added support for 3-D bar and pie charts (via GD::Graph3d)
<li>added logarithmic line/point graph support
<li>added area graphs
<li>added candlestick charts (e.g., for daily trading range charts)
<li>added support for non-numeric domain values
<li>packaged for CPAN
</ul><p>

Release 0.10:<p>
<ul>
<li>Coded; first alpha release
</ul><p>

<a name="behavior"></a>
<h2>DRIVER-SPECIFIC BEHAVIOR</h2><p>
<a name="dsn"></a>
<h3>DATA-SOURCE NAME</h3><p>

The dsn string passed to <code>DBI->connect()</code> is simply <code>'dbi:Chart:'</code>.
No username or password is required.<p>

<a name="types"></a>
<h3>DATA TYPES</h3><p>

For purposes of this discussion, data types are assigned to
the following classifications:<p>
<table border=1><tr bgcolor=lightsteelblue><th>Type Class</th><th>Data Types</th></tr>
<td align=center>Numeric</td><td>INTEGER, SMALLINT, TINYINT, FLOAT, DECIMAL</td></tr>
<!-- <td align=center>Temporal</td><td>DATE, TIME, TIMESTAMP, INTERVAL</td></tr> -->
<td align=center>Symbolic</td><td>CHAR, VARCHAR</td></tr>
</table>
The various type classes are applied as follows:
<ul>
<li>Range (i.e., Y-axis) values <b>must</b> be defined as numbers. 
<li>INTEGER, FLOAT, SMALLINT, TINYINT, and DECIMAL are all acceptable numeric types. 
<li>Domain (i.e., X-axis, Z-axis for barcharts) values may any type class
(numeric or symbolic).
<li>A symbolic domain will result in a uniformly distributed 
mapping of values to the associated axis. 
<li>For piecharts and barcharts, all domain types are treated as symbolic.
<li>For line, point, and area graphs:
<ul>
<li>a numeric domain will be mapped using the scaled numeric values.
<!-- <li>a temporal domain will be mapped using appropriate time-scaled values. -->
<li>a symbolic domain will result in a uniformly distributed mapping to the associated axis.
</ul>
<li>Box & whisker charts require a numeric domain.
</ul>

Note that literal strings are specified with single quotes. Literal strings containing
single quotes can escape the quotes using two consecutive quotes, e.g. 
<pre>
'Literal strings can''t avoid escapes!'
</pre><p>
<a name="datetime"></a>
<h3>Date, Time, Timestamp, and Interval Types</h3><p>
<!--
DATE, TIME, and TIMESTAMP values are expected to be supplied as character strings of the following form:<p>
<table border=1><tr bgcolor=lightsteelblue><th>Type</th><th>Format</th></tr>
<tr><td align=center>DATE</td><td align=center>'YYYY-MM-DD'</td></tr>
<tr><td align=center>TIME</td><td align=center>'HH:MM:SS[.S...]'<br>(subsecond precision optional)</td></tr>
<tr><td align=center>TIMESTAMP</td><td align=center>'YYYY-MM-DD HH:MM:SS[.S...]'<br>(subsecond precision optional)</td></tr>
</table><p>
INTERVAL type can be supplied as either an integer or float value, representing an interval
in seconds. For float values, the fractional part is considered a fractional second.
-->
DATE, TIME, and TIMESTAMP types are currently handled as symbolic domain values.
Better support for these types is planned for the next release.
<p>
Escape clause formatting (i.e., '{d mm/dd/yyy}') will be supported in a future release.<p>

<a name="parmsql"></a>
<h3>SQL DIALECT</h3><p>
DBD::Chart uses a small subset of SQL to create, populate, render, and discard
chart data:<p>
<ul>
<a name="create"></a>
<li><code><b>CREATE { TABLE | CHART } <i>chartname</i> ( <i>&lt;domain-definitions&gt;</i> )</b></code><p>
Creates a chart object that can be populated with datapoints and subsequently rendered. 
<code><b><i>&lt;domain-definitions&gt;</i></b></code> is a list of column definitions
which must follow these rules:<p>
<b>For pie charts:</b>
<ol>
<li>no more than 2 columns should be defined; extra columns will be ignored when the chart is rendered.
<li>the 1st column contains the text of label applied to the associated wedge of the pie.
<li>the 2nd column must be numeric and defines the domain values to be plotted.
</ol><p>
<!-- 
<b>For histograms:</b>
<ol>
<li>at least 2 columns must be defined
<li>the 1st column contains the text label printed along the vertical axis for each bar 
(if only a single domain column is defined) or group of bars (if more than 1 domain column is defined).
<li>the remaining columns must be numeric. When more than 1 domain column is defined, the column
values are plotted in groups by the associated label, i.e., all domains for each row are plotted
in a group.
</ol><p>
-->
<b>For bar charts:</b>
<ol>
<li><b>for 2 axis barcharts:</b>
<ul>
<li>at least 2 columns must be defined
<li>the 1st column contains the text label printed along the horizontal axis for each bar 
(if only a single domain column is defined) or group of bars (if more than 1 domain column is defined).
<li>the remaining columns must be numeric. When more than 1 domain column is defined, the column
values are plotted in groups by the associated label, i.e., all domains for each row are plotted
in a group.
</ul>
<li><b>for 3 axis barcharts:</b>
<ul>
<li>3 columns must be defined
<li>the 1st column contains the text label printed along the X (i.e., horizontal) axis for each bar.
<li>the 2nd column must be numeric and is plotted as a scaled value on the Y (i.e., vertical) axis.
<li>the 3rd column contains the text label printed along the Z (i.e., depth) axis for each bar.
</ul>
</ol><p>
<b>For line, area, or point graphs:</b>
<ol>
<li>at least 2 columns must be defined.
<li>the 1st column defines the X-axis values for each row to be plotted (i.e., the "domain"), 
which may be of any type. Note that non-numeric domain types are handled symbolicly, as 
<a href="#types">described above</a>.
<li>each additional column is used as a Y-axis value for a distinct plot line or point-set within
the rendered image (i.e., multiple ranges may be plotted against a single domain in a single graph).
<li>Y-axis values may be NULL, in which case the corresponding (X, Y) plot point will be omitted from the
associated line or pointset.
<li>numeric domain datasets do not need to be INSERT'ed in order; the charting engine will automatically
sort the domain values into ascending order. Non-numeric domains will be plotted in the same order
as they are INSERT'd.
</ol><p>
<b>For candlestick graphs:</b>
<ol>
<li>at least 3 columns must be defined.
<li>the 1st column defines the X-axis values for each candlestick to be plotted,
which may be of any type.
<li>the 2nd column must be numeric, and is used as the minimum (bottom) value of the candlestick.
<li>the 3rd column must be numeric, and is used as the maximum (top) value of the candlestick.
<li>multiple sets of candlesticks can be plotted in the same graph by defining additional
(minimum, maximum) columns.
</ol><p>
<b>For box & whisker graphs:</b>
<ol>
<li>each defined column represents a range of values
from which the median and quartile values will be computed and plotted. Multiple
columns result in multiple box&whiskers within the same graph stacked from bottom to top.
</ol>
Column qualifers (e.g., NOT NULL, CASESPECIFIC, etc.) are not supported.</li><p>

<a name="drop"></a>
<li><code><b>DROP { TABLE | CHART }<i>chartname</i></b></code><p>
Discards the specified chart context information. Any open statement handles which attempt
to manipulate the chart after it has been dropped will return errors.</li><p>

<a name="insert"></a>
<li><code><b>INSERT INTO <i>chartname</i> VALUES ( <i>&lt;? | NULL | literal&gt;</i> [, ...] )</b></code><p>
Populates the chart with the specified data. A value must be provided for each column defined
in the chart (i.e., no defaults are used.).</li><p>

<a name="select"></a>
<li><code><b>SELECT <i>&lt;chart-type&gt;</i> [, <i>IMAGEMAP</i> ]<br>
FROM <i>? | &lt;chartname&gt;</i> <!-- | &lt;template-uri&gt; | subquery&gt;</i> [, ...] --><br>
WHERE <i>&lt;qualifier&gt; = &lt;? | literal | literallist&gt;</i> [AND ...]</b></code><p>
Renders the image(s) from the specified chart or DBI statement handle, <!-- or XML template document, -->
using the <i>&lt;qualifer&gt;</i>s to control how the image
is rendered. 
<!-- When <i>TEMPLATE</i> is included in the column list, an XML template file 
containing the graph properties and data points is generated. -->
When <i>IMAGEMAP</i> is included in the column list, text
is generated for either 
<ul>
<li>an HTML client-side imagemap 
<li>a Perl compatible array of hashrefs of value and coordinate attributes
</ul>
Various <i>&lt;qualifier&gt;</i>s from the WHERE clause provide
base URL or scripting tags to be associated with the imagemap. 
See <a href="#imagemaps">IMAGEMAPS</a> below for details.<p>
When any of the various <code>$sth->fetch()</code> operations is applied to the SELECT statement:
<ul>
<li>For PNG, JPEG, or GIF formats, images are returned as VARBINARY objects 
representing the binary image data.
<!-- <li>For SVG formats, images are returned as VARCHAR objects representing the SVG description
of the image.
<li>Templates are returned as VARCHAR objects containing the XML description for of all the
graph properties, as well as any supplied data points.
-->
<li>Imagemaps are returned as VARCHAR objects containing the HTML imagemap text.
</ul><p>
Valid <i>&lt;chart-type&gt;</i> values are<p>
<ul>
<li><b>PIECHART</b> - generates a piechart; each wedge is represented as a percentage of 
the sum of all the domain values. Negative domain values result in an error.
<li><b>BARCHART</b> - generates a barchart; each bar is represented as a percentage of the 
largest value in the domain. Negative values are supported.
<li><b>BOXCHART</b> - generates a box & whisker chart, plotting a box bounded by the
upper and lower quartile values, with a vertical line drawn through the median value,
and horizontal lines drawn from the sides of the box to the lower/upper extremes.
Extremes are limited to 1.5 interquartiles from each side of the box. Outliers 
(i.e., values beyond the lower/upper extremes) are plotted as filled diamonds.
<!-- <li><b>HISTOGRAM</b> - generates a histogram (i.e., horizontal barchart); 
each bar is represented as a percentage of the largest value
in the domain. Negative values are <b>not</b> supported. -->
<li><b>LINEGRAPH</b> - generates a linegraph
<li><b>AREAGRAPH</b> - generates an areagraph (i.e., the area between plotline and X-axis is filled 
with the plot color).
<li><b>POINTGRAPH</b> - generates a pointgraph (i.e., scatter-graph)
<li><b>CANDLESTICK</b> - generates a candlestick graph
<!-- <li>IMAGE - used only when derived tables are specified; permits layering of
different graph types in a single image. -->
</ul><p>
The following qualifiers are allowed:<p>
<table border=1><tr bgcolor=orange><th>Qualifier</th><th>Description</th><th>Default<br>Value</th><th>Restrictions</th></tr>
<tr>
	<td align=center valign=top><b>WIDTH</b></td>
	<td valign=top>sets the image width in pixels</td>
	<td valign=top>400</td>
	<td valign=top>single value only<!-- , cannot be used within a derived table query --></td></tr>
<tr>
	<td valign=top align=center><b>HEIGHT</b></td>
	<td valign=top>sets the image height in pixels</td>
	<td valign=top>400</td>
	<td valign=top>single value only<!-- , cannot be used within a derived table query --></td></tr>
<tr>
	<td valign=top align=center><b>SHOWGRID</b></td>
	<td valign=top>when set to 1, causes the background grid of all charts/graphs except piecharts and box&whisker charts to be displayed</td>
	<td valign=top>0</td>
	<td valign=top>single value only, valid values are 0 and 1.</td></tr>
<tr>
	<td valign=top align=center><b>COLOR</b><br>(synonym: <b>COLORS</b>)</td>
	<td valign=top>sets the color of chart elements; may be multivalued, in which case each wedge(piechart),
bar(barchart, histogram), box&whisker, line(linegraph), area(areagraph), pointset(scattergraph), or candlestick-set uses the next
color in the list. Valid color values are <code>white, lgray, gray, dgray, black, lblue, blue, dblue, gold, lyellow,
yellow, dyellow, lgreen, green. dgreen, lred, red, dred, lpurple,
purple, dpurple, lorange, orange, pink, dpink, marine, cyan, lbrown, dbrown.</code></td>
	<td valign=top>black</td>
	<td valign=top>The colorlist wraps if more range valuesets are defined than colors. Ignored for iconic barcharts/histograms</td></tr>
<tr>
	<td valign=top align=center><b>ICON</b><br>(synonym: <b>ICONS</b>)</td>
	<td valign=top>sets an icon image to be used to render the bars for barcharts, or datapoints
	for line, point, area, and candlestick graphs.<p>
	The number of icons per bar is based the ratio of the icon pixel height to the the maximum image 
	pixel height(for barcharts). Icon images may be clipped proportionally to completely fill bars
	of barcharts.<p>
	When multiple range values are defined per domain, and a list of icons is provided,
	each range in a cluster of bars will be rendered with a different icon, selected in order,
	from the provided list.
	</td>
	<td valign=top>None.</td>
	<td valign=top>String name of a compatible format image file (PNG, JPEG, GIF). 
	Not valid for piecharts. May be multivalued. Icon list wraps if more ranges are defined than icons.</td></tr>
<!-- <tr>
	<td valign=top align=center><b>GRIDCOLOR</b></td>
	<td valign=top>sets the color of any background grid lines. Default black</td>
	<td valign=top>black</td>
	<td valign=top>Single valued</td></tr> -->
<tr>
	<td valign=top align=center><b>SHAPE</b></b><br>(synonym: <b>SHAPES</b>)</td>
	<td valign=top>sets the shape of points for line, area, point, or candlestick graphs; 
	may be multivalued. Valid values are <code>fillsquare, opensquare, horizcross, diagcross, filldiamond, opendiamond,
fillcircle, opencircle, icon.</code> Default none.</td>
	<td valign=top>fillcircle</td>
	<td valign=top>An icon shape requires one or more icon files to be specified with the ICON attribute.</td></tr>
<tr>
	<td valign=top align=center><b>SHOWPOINTS</b></td>
	<td valign=top>for line, area, and candlestick graphs, determines whether datapoints are 
		explicitly rendered</td>
	<td valign=top>1 if the SHAPE attribute has been specified, otherwise 0</td>
	<td valign=top>single value only. Ignored for pie and bar charts, and pointgraphs. 
	Valid values are 0 and 1.</td></tr>
<tr>
	<td valign=top align=center><b>SHOWVALUES</b></td>
	<td valign=top>for barcharts, box&whisker charts, line, area, point, and 
	candlestick graphs, determines whether the datapoint values are displayed. 
	When set to 1, the (X,Y) values are displayed just above the plotted datapoint 
	for line, area, and point graphs; for candlesticks, the minimum and maximum Y values 
	are plotted just above and below each candlestick. For barcharts, the Y axis value
	of each bar is displayed. FOr box & whisker charts, the median and lower and upper quartile
	values are displayed.</td>
	<td valign=top>0</td>
	<td valign=top>single value only, valid values are 0 and 1, ignored for pie charts.</td></tr>
<tr>
	<td valign=top align=center><b>X-LOG</b></td>
	<td valign=top>for line, area, point, and candlestick graphs, causes values along the X-AXIS to be plotted in log<sub>10</sub> form;</td>
	<td valign=top>0</td>
	<td valign=top>All domain values must be &gt; 0 when X-LOG is enabled.</td></tr>
<tr>
	<td valign=top align=center><b>Y-LOG</b></td>
	<td valign=top>for barchart, line, area, point, and candlestick graphs, causes values along the Y-AXIS to be plotted in log<sub>10</sub> form;</td>
	<td valign=top>0</td>
	<td valign=top>All range values must be &gt; 0 when Y-LOG is enabled.</td></tr>
<tr>
	<td valign=top align=center><b>X-AXIS</b></td>
	<td valign=top>sets the label string on the X-AXIS of line, area, point, and candlestick graphs.</td>
	<td valign=top>'X-Axis'</td>
	<td valign=top>Single string value</td></tr>
<tr>
	<td valign=top align=center><b>Y-AXIS</b></td>
	<td valign=top>sets the label string on the Y-AXIS.</td>
	<td valign=top>'Y-Axis'</td>
	<td valign=top>Single string value; ignored for piecharts and box&whisker charts</td></tr>
<tr>
	<td valign=top align=center><b>Z-AXIS</b></td>
	<td valign=top>sets the label string on the Z-AXIS. Also directs plotting engine to render
	true 3 axis barchart.</td>
	<td valign=top>'Z-Axis'</td>
	<td valign=top>Single string value; valid for barcharts only, ignored for all others</td></tr>
<tr>
	<td valign=top align=center><b>TITLE</b></td>
	<td valign=top>sets the title string of the graph.</td>
	<td valign=top>None.</td>
	<td>&nbsp;</td></tr>
<tr>
	<td valign=top align=center><b>3-D</b></td>
	<td valign=top>sets the 3-D effect on pie and bar charts.</td>
	<td valign=top>0</td>
	<td>&nbsp;</td></tr>
<tr>
	<td valign=top align=center><b>BACKGROUND</b></td>
	<td valign=top>sets the background color</td>
	<td valign=top>white</td>
	<td valign=top>single value only, from list of legal colors or <code>transparent</code>.</td></tr>
<tr>
	<td valign=top align=center><b>TEXTCOLOR</b></td>
	<td valign=top>sets the color of text in the image.</td>
	<td valign=top>black</td>
	<td valign=top>Single value from the list of valid colors.</td></tr>
<tr>
	<td valign=top align=center><b>GRIDCOLOR</b></td>
	<td valign=top>sets the color of the grid in the image.</td>
	<td valign=top>black</td>
	<td valign=top>Single value from the list of valid colors.</td></tr>
<tr>
	<td valign=top align=center><b>LOGO</b></td>
	<td valign=top>sets a background image; default none, single value only. Accepts a filename 
(optionally including path info) of an image file of either PNG, JPEG, or GIF format. 
The image will be centered under the graph image.</td>
	<td valign=top>None.</td>
	<td valign=top>If the image size is less than the defined
specified WIDTH and/or HEIGHT, the BACKGROUND color will be used to fill to the edges. If
the image exceeds the WIDTH and/or HEIGHT, the image will be clipped to fit.</td></tr>
<tr>
	<td valign=top align=center><b>SIGNATURE</b></td>
	<td valign=top>sets a signature string to be printed in tiny font in the
lower right hand corner of the image. E.g. "Copyright(C) 2001, GOWI Systems. All rights reserved.".</td>
	<td valign=top>None.</td>
	<td valign=top>single value, text string only, default none.</td></tr>
<tr>
	<td valign=top align=center><b>FORMAT</b></td>
	<td valign=top>sets the output image format, either PNG, JPEG, or GIF</td>
	<td valign=top>PNG</td>
	<td valign=top>Single value, string, either 'PNG','JPEG', 'GIF' (case insensitive).
	Some formats require additional support libraries (See <a href="#conform">PREREQUISITE SOFTWARE</a> below).</td></tr>
<tr>
	<td valign=top align=center><b>X-ORIENT</b></td>
	<td valign=top>sets the display angle of the X-axis tick labels</td>
	<td valign=top>Horizontal</td>
	<td valign=top>single value, case-insensitive string, 'horizontal' or 'vertical'</td></tr>
<tr>
	<td valign=top align=center><b>KEEPORIGIN</b></td>
	<td valign=top>forces the origin axes (0,0) in the image. 
	Normally, bar, line, point, area, and candlestick graphs automatically
clip away the origin axes if the plot does not cross the origin axis. Set this property
to 1 to force the origin axis to be included. </td>
	<td valign=top>0</td>
	<td valign=top>single value, either 0 or 1. Ignored for piecharts.</td></tr>
<!-- <tr>
	<td valign=top align=center><b>Y-MAX</b></td>
	<td valign=top>sets the upper limit on Y-axis values; used for improved rendering of
	barcharts.</td>
	<td valign=top>None.</td>
	<td>&nbsp;</td></tr>
<tr>
	<td valign=top align=center><b>Y-MIN</b></td>
	<td valign=top>sets the lower limit on Y-axis values; used for improved rendering of
	barcharts.</td>
	<td valign=top>None.</td>
	<td>&nbsp;</td></tr>
	-->
<!-- 
<tr>
	<td valign=top align=center><b>TEMPLATE</b></td>
	<td valign=top>Establishes an XML template that describes graph properties. Any additional
	properties provided in the WHERE clause will override the template value(s).</td>
	<td valign=top>None.</td>
	<td>Single string value of a URI: e.g., 'http://www.presicient.com/simplebars.xml' or
	'file://topdir/childdir/sample.xml'</td></tr>
<tr>
	<td valign=top align=center><b>FONT</b></td>
	<td valign=top>sets the font face for text in the image.</td>
	<td valign=top>Default GD::Text font</td>
	<td>Single string value</td></tr> -->
<tr>
	<td valign=top align=center><b>MAPTYPE</b></td>
	<td valign=top>set the type of imagemap</td>
	<td valign=top>HTML</td>
	<td valign=top>Single string value either 'HTML' or 'Perl' 
	</td></tr>
<tr>
	<td valign=top align=center><b>MAPNAME</b></td>
	<td valign=top>set the name of the map generated for HTML imagemaps</td>
	<td valign=top>'plot'</td>
	<td valign=top>Single string value; only alphanumerics or '_' allowed. 
	</td></tr>
<tr>
	<td valign=top align=center><b>MAPURL</b></td>
	<td valign=top>sets the base URL for HTML IMAGEMAPs.</td>
	<td valign=top>None</td>
	<td valign=top>Single string value of standard URL form. E.g., <br>
	'http://www.presicient.com/procimg.pl?func=magic&plotnum=:PLOTNUM&X=:X&Y=:Y'.<br>
	If not given, and IMAGEMAP is requested, the map will be generated with NOHREF tags.<br>
	The following special variable names will be interpolated with their literal values
	within the URL string:
	<ol>
	<li>:PLOTNUM - the ordinal number of the plot within the image, starting from 0.
	(E.g., a line graph with multiple ranges would have multiple plots).
	<li>:X - the X-value of the datapoint for line/point/area/candlestick graphs,
	the domain label for barcharts, or the wedge label for piecharts
	<li>:Y - the Y-value of the datapoint for line/point/area/candlestick graphs and
	barcharts, or the value associated with the wedge label for piecharts
	<li>:Z - not supported for line/point/area/candlestick graphs and 2-axis
	barcharts; the Z-axis value label for 3-axis barcharts, or the percentage value of
	the associated wedge for piecharts.
	</ol>
	</td></tr>
<tr>
	<td valign=top align=center><b>MAPSCRIPT</b></td>
	<td valign=top>set the text of a client-side scripting tag to be included in
	HTML imagemaps. E.g., <br>
	'ONCLICK="alert(\'Got (:X,:Y) for plot :PLOTNUM\')"'</td>
	<td valign=top>None.</td>
	<td valign=top>Single string value of a valid scripting tag. 
	Special variable name interpolation is same as for MAPURL.
	</td></tr>
</table><p>
<b>General Restrictions:</b><br>
<ul>
<!-- <li>Only a single level of derived tables is allowed. -->
<li>no expressions (e.g., X + Y) or functions (e.g., AVG(X)) are allowed.<br>
<li>ordering of wedges and bars in pie and barcharts is determined by the order the rows are
INSERTed.<br>
<li>Ordering of plot points in line, area, and point graphs with numeric domains is 
ascending left to right on the X-axis, ascending bottom to top on Y-axis. Graphs with non-numeric domains are plotted
in the order they are INSERT'd.<br>
<li>When generating area graphs with multiple range valuesets (i.e., more the 1 set of Y values),
the order in which the range valuesets are plotted is column 2, column 3,...column N.
This order may cause some ranges to be completely obscured by the areagraph of a succeding range. You'll
need to experiment with the order of your range valuesets to get the best view.<br>
<li>Datasources for the chart may be either 
<ul>
<li>a table explicitly CREATEd on the dbi:Chart database handle that has been 
populated via INSERTs
<li>a valid DBI statement handle which has been <code>execute()</code>'d. 
When a parameterized FROM is specified in a SELECT statement, the application 
must bind a <code>prepare()</code>'d and <code>execute()</code>'d
statement handle from any valid DBI data source, from which DBD::Chart will 
subsequently <code>fetch()</code> the data for populating the chart. In that case,
the application does not need to explicitly CREATE and INSERT to a table for 
the chart. Obviously, the application must still be careful that the column data
returned by the bound statement handle is of the proper format (as described
above) and does not returned an excessive number of rows - DBD::Chart currently
generates an error if more than 1,000 rows is returned by such a bound statement
handle.
</ul><br>
<li>Setting the FORMAT to JPEG on Windows platforms may be problematic. The PPM
of the GD package provided by ActiveState does not appear to include the jpeg-6b 
library, and the Makefile for the jpeg-6b library only builds a static library,
rather than a DLL. To render JPEG format graphics requires building the jpeg 
library and then building the libgd package to include JPEG support.
<li>Support for GIF image formats requires a compatible version of the GD
modules (pre 1.20).
<!-- <li>Y-MIN and Y-MAX currently only apply to barcharts. -->
</ul>
</li><p>
<a name="update"></a>
<li><code><b>UPDATE <i>chartname</i><br> 
SET <i>&lt;domain-name&gt;</i> = <i>&lt;? | literal&gt;</i><br>
[ WHERE <i>&lt;domain-value&gt;</i> <i>&lt;operator&gt;</i> <i>&lt;? | literal&gt;</i>]</b></code><p>
Replaces the point with the specified value with a new point value. 
Valid <i>&lt;operator&gt;</i>s are &lt;, &lt;=, =, &gt;, &gt;=, &lt;&gt;.
E.g., this could be used with
a bar chart to refresh the bar values in realtime (e.g., monitor User's CPU usage).</li><p>

<a name="delete"></a>
<li><code><b>DELETE FROM <i>chartname</i><br>
[ WHERE <i>&lt;domain-name&gt;</i> <i>&lt;operator&gt;</i> <i>&lt;? | literal&gt;</i>]</b></code><p>
Removes one (or more) data points from the chart. Valid <i>&lt;operator&gt;</i>s are 
&lt;, &lt;=, =, &gt;, &gt;=, &lt;&gt;.
E.g., this could be used to render realtime
scrolling linegraphs where old values are rolled off the left of the graph, and new values are appended
on the right.<br>
<b>NOTE:</b>Deleting from a barchart, then inserting new rows, will cause new
rows to be displayed at the right end of the chart. Use UPDATE if you want to
modified the bar values, but maintain the original display order.
</li>

</ul><p>

<a name="imagemaps"></a>
<h3>IMAGEMAPS</h3>
Imagemaps can be generated by including the <code>IMAGEMAP</code> column as the 2nd field 
in the SELECTed fieldlist.
HTML client-side imagemaps are generated if the <code>MAPTYPE</code> qualifier is 'HTML', 
or if no qualifier is provided. 
A Perl compatible array of hashrefs of attributes and coordinates is provided if the
<code>MAPTYPE</code> qualifier is 'PERL'.<p>
The resulting HTML imagemap will have the following behaviors based on the type of chart/graph
requested, and the values specified (if any) for the MAPURL and MAPSCRIPT qualifiers:<p>
<table border=1>
<tr bgcolor=lightsteelblue><th>Graph Type</th><th>Hotspot Area</th><th>ALT tag</th><th>Special Variable<br>Values</th></tr>
<tr><td valign=top align=center><b>Piechart</b></td>
	<td valign=top>Polygon starting from center and<br>connecting 10&deg; arcs along the circumference of the wedge.</td>
	<td valign=top>Wedge value followed by wedge percent in parentheses<br>
	e.g., "1234(16%)"</td>
	<td>
		<ol>
		<li>:PLOTNUM = 0
		<li>:X = &lt;wedge-label&gt;
		<li>:Y = &lt;assoc. wedge value&gt;
		<li>:Z = &lt;wedge's percent of total&gt;
		</ol>
	</td></tr>
<tr><td valign=top align=center><b>2-D Barchart</b></td>
	<td valign=top>Complete area of each bar</td>
	<td valign=top>Range value for the bar</td>
	<td>
		<ol>
		<li>:PLOTNUM = &lt;range number of the bar&gt;
		<li>:X = &lt;domain label for the bar&gt;
		<li>:Y = &lt;range value for the bar&gt;
		<li>:Z = &lt;empty-string&gt;
		</ol>
	</td></tr>
<tr><td valign=top align=center><b>3-D Barchart<br>(including 3-axis)</b></td>
	<td valign=top>Complete area of top face of each bar</td>
	<td valign=top>Range value for the bar</td>
	<td>
		<ol>
		<li>:PLOTNUM = &lt;range number of the bar&gt;
		<li>:X = &lt;domain label for the bar&gt;
		<li>:Y = &lt;range value for the bar&gt;
		<li>:Z = &lt;Z-axis label value for the bar&gt;
		</ol>
	</td></tr>
<tr><td valign=top align=center><b>Line, point, area graph</b></td>
	<td valign=top>8-pixel diameter circle centered on each datapoint</td>
	<td valign=top>(domain, range) values of the datapoint</td>
	<td>
		<ol>
		<li>:PLOTNUM = &lt;range number of the plot&gt;
		<li>:X = &lt;domain value for the datapoint&gt;
		<li>:Y = &lt;range value for the datapoint&gt;
		<li>:Z = &lt;empty-string&gt;
		</ol>
	</td></tr>
<tr><td valign=top align=center><b>Candlestick</b></td>
	<td valign=top>8-pixel diameter circle centered on<br>each datapoint, both top and bottom of stick</td>
	<td valign=top>(domain, range) values of the datapoint</td>
	<td>
		<ol>
		<li>:PLOTNUM = &lt;range number of the plot&gt;
		<li>:X = &lt;domain value for the datapoint&gt;
		<li>:Y = &lt;range value for the datapoint&gt;
		<li>:Z = &lt;'top' | 'bottom'&gt; depending on which endpoint of candlestick is focused.
		</ol>
	</td></tr>
<tr><td valign=top align=center><b>Box & Whisker</b></td>
	<td valign=top>the area of the plotted box, and an<br>
	8-pixel diameter circle centered on<br> the lower and upper ends of the whicksers</td>
	<td valign=top>median[lower quartile..upper quartile] values of the box, and
	the values of the lower and upper extreme datapoint</td>
	<td>
		<ol>
		<li>:PLOTNUM = &lt;range number of the plot&gt;
		<li>:X = &lt;median value&gt;
		<li>:Y = &lt;lower quartile value&gt;
		<li>:Z = &lt;upper quartile value&gt;
		</ol>
	</td></tr>
</table>
<p>
A Perl imagemap will have the following behaviors based on the type of chart/graph
requested, and the values specified (if any) for the MAPURL and MAPSCRIPT qualifiers:<p>
<table border=1>
<tr bgcolor=lightsteelblue><th rowspan=2>Graph Type</th><th colspan=6>Attributes &amp; Values</th></tr>
<tr bgcolor=orange>
	<th><code>shape</code></th>
	<th><code>coordinates</code></th>
	<th><code>plotnum</code></th>
	<th><code>X</code></th>
	<th><code>Y</code></th>
	<th><code>Z</code></th></tr>
<tr><td valign=top align=center><b>Piechart</b></td>
	<td valign=top>POLY</td>
	<td valign=top>arrayref of (x,y) image pixel coordinates of polygon
	starting from center and connecting 10&deg; arcs along the circumference of the wedge.</td>
	<td valign=top align=center>0</td>
	<td valign=top align=center>wedge label</td>
	<td valign=top align=center>associated wedge value</td>
	<td valign=top align=center>wedge's percent of total</td></tr>
<tr><td valign=top align=center><b>2-D Barchart</b></td>
	<td valign=top>RECT</td>
	<td valign=top>arrayref of (x,y) image pixel coordinates of rectangle of associated bar</td>
	<td valign=top align=center>range number of the bar</td>
	<td valign=top align=center>domain label</td>
	<td valign=top align=center>range value</td>
	<td valign=top align=center>undef</td></tr>
<tr><td valign=top align=center><b>3-D Barchart<br>(including 3-axis)</b></td>
	<td valign=top>POLY</td>
	<td valign=top>arrayref of (x,y) image pixel coordinates of top face of associated bar</td>
	<td valign=top align=center>range number of the bar</td>
	<td valign=top align=center>domain label for the bar</td>
	<td valign=top align=center>range value for the bar</td>
	<td valign=top align=center>Z-axis label value for the bar</td></tr>
<tr><td valign=top align=center><b>Line, point, area graph</b></td>
	<td valign=top>CIRCLE</td>
	<td valign=top>arrayref of (xcenter, ycenter, radius) image pixel coordinates of 8-pixel 
	diameter circle centered on the datapoint</td>
	<td valign=top align=center>range number of the plot</td>
	<td valign=top align=center>domain value for the datapoint</td>
	<td valign=top align=center>range value for the datapoint</td>
	<td valign=top align=center>undef</td></tr>
<tr><td valign=top align=center><b>Candlestick</b></td>
	<td valign=top>CIRCLE</td>
	<td valign=top>arrayref of (xcenter, ycenter, radius) image pixel coordinates of 8-pixel diameter 
	circle centered on<br>each datapoint, both top and bottom of stick</td>
	<td valign=top align=center>range number of the plot</td>
	<td valign=top align=center>domain value for the datapoint</td>
	<td valign=top align=center>range value for the datapoint</td>
	<td valign=top align=center>'top' | 'bottom', depending on which candlestick endpoint is focused.</td></tr>
<tr><td valign=top align=center><b>Box & Whisker</b></td>
	<td valign=top>RECT, CIRCLE</td>
	<td valign=top>arrayref of (x,y of upper left of box, x.y of lower right of box) image pixel coordinates of 
	the box</td>
	<td valign=top align=center>range number of the plot</td>
	<td valign=top align=center>median value of the box</td>
	<td valign=top align=center>lower quartile value of the box</td>
	<td valign=top align=center>Upper quartile value of the box.</td></tr>
</table>
<p>

<a name="errors"></a>
<h3>ERROR HANDLING</h3><p>

Any errors generated from improper SQL usage are flagged with an error value of -1, and
appropriate text in the errstr. Errors emanating from DBD::Chart::Plot
will be flagged in err and errstr with whatever info is returned.
<p>

<a name="diags"></a>
<h3>DIAGNOSTICS</h3><p>

DBI provides the <code>trace()</code> function to enable various levels
of trace information. DBD::Chart currently doesn't add any traces to this.
<p>

<a name="specattr"></a>
<h3> DRIVER-SPECIFIC ATTRIBUTES</h3><p>

<ul>
<li>chart_noverify - when set to 1 during connect(), verification of data values with target
columns is bypassed (to provide some performance improvement).
</ul><p>

<a name="funcs"></a>
<h3> DRIVER-SPECIFIC FUNCTIONS</h3><p>

The following functions are provided to optimize data movement:<br>
<b><i>Note:</b>generalized versions of these functions are currently 
under consideration for addition to the DBI specification.</i><p>
<ul>
<li><code>$sth->chart_bind_param_array($paramnum, \@paramary [\%attr | $typespec])</code><p>
binds an array of parameters to the statement; the entire array of parameters will be
consumed when the statement is executed.<p>
<li><code>$sth->chart_bind_param_status(\@stsary | \%stshash)</code><p>
binds an array or hash to receive parameter status information when parameter array binding has been
used on the statement. If the array version is used, then status for every supplied parameter
tuple is returned; if a hash is used, then only the status of unsuccessful parameter tuples is reported,
using the ordinal tuple number as the hashkey.<p>
</ul>

<i><b>Note:</b> array binding of output values is not supported, since
SELECT only returns a single row at a time, namely, the chart image and (optionally)
an imagemap.</i><p>

<a name="conform"></a>
<h2>PREREQUISITES AND CONFORMANCE</h2><p>

DBD::Chart requires the following (versions are recommended
only, cuz they're the version I built with...if you're feeling
frisky, you can try older or newer versions.): <p>
<ul>
<li>Perl version 5.6.0
<li>DBI module 1.14.
<li>GD module 1.32
<li>GD::Text (<i>aka GDTextUtil</i>) module 0.80
<!-- <li>SVG-PL 1.01
<li>XML::Simple
<li>XML::Writer -->
</ul>

Be advised that these modules require the following (non-Perl) libraries:<p>
<ul>
<li> <a href="http://www.boutell.com/gd/">libgd</a>
<li> <a href="http://www.libpng.org/pub/png">libpng</a>
<li> <a href="http://www.info-zip.org/pub/infozip/zlib/">zlib</a>
<li> <a href="http://www.ijg.org/">jpeg-6b</a> (for JPEG support)
</ul><p>

The following DBI functions are not supported:
<pre>
DBI->data_sources()
$dbh->prepare_cached()
$sth->table_info()
$dbh->tables()
$dbh->type_info_all()
$dbh->type_info()
</pre>

<p>
<a name="bugs"></a>
<h2>KNOWN BUGS</h2><p>

<table border=1><tr>
<th align=center>Bug Number</th>
    <th align=center>Report<br>Date</th>
    <th align=center>Release<br>Reported in</th>
    <th align=center>Description</th>
    <th align=center>Status</th>
    <th align=center>Fix<br>Release</th>
</tr><tr>
	<td align=center>1</td>
	<td align=center>2001-Mar-16</td>
	<td align=center>0.20</td>
	<td align=center>SQL statements with newlines won't prepare()</td>
	<td align=center>Fixed</td>
	<td align=center>0.30</td>
</tr><tr>
	<td align=center>2</td>
	<td align=center>2001-May-09</td>
	<td align=center>0.30</td>
	<td align=center>INTEGER column definition as last column in CREATE TABLE causes an error</td>
	<td align=center>Fixed</td>
	<td align=center>0.40</td>
</tr><tr>
	<td align=center>3</td>
	<td align=center>2001-May-09</td>
	<td align=center>0.30</td>
	<td align=center>FORMAT property not properly handled as string property</td>
	<td align=center>Fixed</td>
	<td align=center>0.40</td>
</tr><tr>
	<td align=center>4</td>
	<td align=center>2001-Jun-01</td>
	<td align=center>0.40</td>
	<td align=center>Y-axis ticks not properly aligned when grid disabled</td>
	<td align=center>Fixed</td>
	<td align=center>0.41</td>
</tr><tr>
	<td align=center>5</td>
	<td align=center>2001-Jun-01</td>
	<td align=center>0.40</td>
	<td align=center>INSERT of string literal value kept quote mark</td>
	<td align=center>Fixed</td>
	<td align=center>0.41</td>
</tr><tr>
	<td align=center>6</td>
	<td align=center>2001-Jun-01</td>
	<td align=center>0.40</td>
	<td align=center>INSERT of string literal used bad column index variable</td>
	<td align=center>Fixed</td>
	<td align=center>0.41</td>
</tr><tr>
	<td align=center>7</td>
	<td align=center>2001-Oct-01</td>
	<td align=center>0.41</td>
	<td align=center>X-ORIENT='HORIZONTAL' didn't work with symbolic domains, candlesticks</td>
	<td align=center>Fixed</td>
	<td align=center>0.42</td>
</tr></table>
<a name="todo"></a>
<h2>TO DO List</h2><p>

<ul>
<li>temporal datatypes
<li>SVG support
<li>XML template support
<li>Support derived tables to layer graphs in an image
<li>Gantt charts ?
<li>surfacemaps ?
<li>some limited meta-data capability
<li> <i>Any suggestions?</i>
</ul>
<p>

<a name="acks"></a>
<h2>ACKNOWLEDGEMENTS</h2><p>

Many thanks to all the authors of the various GD, PNG, JPEG, SVG, and zlib modules.
Special thanks to all the initial victims, er, users for their comments,
complaints, and suggestions.<p>
Special thanks to <a href="mailto:Peter@PSDT.com">Peter Scott</a>
for the GIF support and a few other fixes!

<a name="refs"></a>
<h2>REFERENCES</h2><p>

<ul>
<li><a href="http://www.symbolstone.org/technology/perl/DBI/">Official DBI Site</a>
<li><a href="http://www.cpan.org">CPAN</a>
<li><a href="http://www.perl.com">Perl.com</a>
<li><a href="http://www.w3c.org/svg">SVG Reference</a>
<li><a href="http://www.adobe.com">Adobe Corp</a> (for SVG viewer)
<li><a href="http://www.activestate.com">ActiveState</a> (for Perl software for Windows)
</ul>

<h2>AUTHOR</h2><p>

<a href="mailto:darnold@presicient.com">Dean Arnold</a><p>

<a name="copy"></a>
<h2>COPYRIGHT</h2><p>

Copyright (c) 2001, Dean Arnold, USA<br>
Affiliations:<br>
<ul>
<li><a href="http://www.presicient.com">Presicient Corp.</a>,<br>
<li><a href="http://www.mylines.com">MyLines.com</a>,<br>
<li><a href="http://home.earthlink.net/~darnold">Homepage</a>
</ul><p>
Permission is granted to use this software according to the terms of the
Artistic License.

This program is distributed in the hope that it will be useful,
but WITHOUT ANY WARRANTY; without even the implied warranty of
MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.<p>

I'm offering the software <b>AS IS</b>, and <b>ACCEPT NO
LIABILITY FOR ANY ERRORS OR OMMISSIONS IN, OR LOSSES INCURRED AS A
RESULT OF USING DBD::Chart.</B><p>
I reserve the right to provide support for this software
to individual sites under a separate (possibly fee-based)
agreement.<p>

<center><i>Last updated December 3, 2001</i>

</body></html>

